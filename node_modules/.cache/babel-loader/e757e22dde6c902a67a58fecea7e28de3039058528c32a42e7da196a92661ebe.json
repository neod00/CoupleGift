{"ast":null,"code":"// 쿠팡 파트너스 API 클라이언트 클래스\nclass CoupangPartnerService {\n  constructor() {\n    this.partnerId = void 0;\n    this.functionsUrl = void 0;\n    this.partnerId = process.env.REACT_APP_COUPANG_PARTNER_ID || '';\n    // 개발 환경과 프로덕션 환경에 따라 다른 URL 사용\n    this.functionsUrl = process.env.NODE_ENV === 'production' ? '/.netlify/functions' : 'http://localhost:8888/.netlify/functions';\n  }\n\n  // 제품 검색 API 호출 (Netlify Functions 통해)\n  async searchProducts(keyword, limit = 10) {\n    try {\n      const response = await fetch(`${this.functionsUrl}/coupang-search`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          keyword,\n          limit\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.error) {\n        throw new Error(data.error);\n      }\n      return data;\n    } catch (error) {\n      console.error('쿠팡 제품 검색 오류:', error);\n\n      // 오류 발생 시 더미 데이터 반환\n      return this.getDummyProducts(keyword, limit);\n    }\n  }\n\n  // 더미 제품 데이터 생성 (백업용)\n  getDummyProducts(keyword, limit) {\n    const products = [{\n      productId: '1',\n      productName: `${keyword} 관련 제품 1`,\n      productPrice: 59000,\n      productImage: `https://via.placeholder.com/300x200?text=${encodeURIComponent(keyword)}1`,\n      productUrl: `https://www.coupang.com/vp/products/1?vendorItemId=1&src=1036296&spec=10304982`,\n      originalPrice: 79000,\n      discountRate: 25,\n      vendorItemId: '1',\n      categoryName: '생활용품',\n      rating: 4.5,\n      ratingCount: 128\n    }, {\n      productId: '2',\n      productName: `${keyword} 관련 제품 2`,\n      productPrice: 89000,\n      productImage: `https://via.placeholder.com/300x200?text=${encodeURIComponent(keyword)}2`,\n      productUrl: `https://www.coupang.com/vp/products/2?vendorItemId=2&src=1036296&spec=10304982`,\n      originalPrice: 109000,\n      discountRate: 18,\n      vendorItemId: '2',\n      categoryName: '패션',\n      rating: 4.2,\n      ratingCount: 89\n    }, {\n      productId: '3',\n      productName: `${keyword} 관련 제품 3`,\n      productPrice: 79000,\n      productImage: `https://via.placeholder.com/300x200?text=${encodeURIComponent(keyword)}3`,\n      productUrl: `https://www.coupang.com/vp/products/3?vendorItemId=3&src=1036296&spec=10304982`,\n      originalPrice: 99000,\n      discountRate: 20,\n      vendorItemId: '3',\n      categoryName: 'IT기기',\n      rating: 4.7,\n      ratingCount: 256\n    }];\n    return {\n      products: products.slice(0, limit),\n      totalCount: products.length\n    };\n  }\n\n  // 파트너스 링크 생성\n  generatePartnerLink(productUrl) {\n    if (!this.partnerId) {\n      console.warn('쿠팡 파트너 ID가 설정되지 않았습니다. 기본 링크를 반환합니다.');\n      return productUrl;\n    }\n    const partnerCode = this.partnerId;\n    const encodedUrl = encodeURIComponent(productUrl);\n    return `https://link.coupang.com/a/${partnerCode}?url=${encodedUrl}`;\n  }\n\n  // 검색 링크 생성 (백업용)\n  generateSearchLink(keyword) {\n    if (!this.partnerId) {\n      return `https://www.coupang.com/np/search?q=${encodeURIComponent(keyword)}`;\n    }\n    const partnerCode = this.partnerId;\n    const encodedKeyword = encodeURIComponent(keyword);\n    return `https://link.coupang.com/a/${partnerCode}?url=https%3A%2F%2Fwww.coupang.com%2Fnp%2Fsearch%3Fq%3D${encodedKeyword}`;\n  }\n}\nexport const coupangService = new CoupangPartnerService();","map":{"version":3,"names":["CoupangPartnerService","constructor","partnerId","functionsUrl","process","env","REACT_APP_COUPANG_PARTNER_ID","NODE_ENV","searchProducts","keyword","limit","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","error","console","getDummyProducts","products","productId","productName","productPrice","productImage","encodeURIComponent","productUrl","originalPrice","discountRate","vendorItemId","categoryName","rating","ratingCount","slice","totalCount","length","generatePartnerLink","warn","partnerCode","encodedUrl","generateSearchLink","encodedKeyword","coupangService"],"sources":["C:/Users/NT940XHA/OneDrive/Business/ai automation/CoupleGift/src/services/coupangService.ts"],"sourcesContent":["interface CoupangProduct {\r\n  productId: string;\r\n  productName: string;\r\n  productPrice: number;\r\n  productImage: string;\r\n  productUrl: string;\r\n  originalPrice: number;\r\n  discountRate: number;\r\n  vendorItemId: string;\r\n  categoryName: string;\r\n  rating: number;\r\n  ratingCount: number;\r\n}\r\n\r\ninterface CoupangSearchResponse {\r\n  products: CoupangProduct[];\r\n  totalCount: number;\r\n}\r\n\r\n// 쿠팡 파트너스 API 클라이언트 클래스\r\nclass CoupangPartnerService {\r\n  private readonly partnerId: string;\r\n  private readonly functionsUrl: string;\r\n\r\n  constructor() {\r\n    this.partnerId = process.env.REACT_APP_COUPANG_PARTNER_ID || '';\r\n    // 개발 환경과 프로덕션 환경에 따라 다른 URL 사용\r\n    this.functionsUrl = process.env.NODE_ENV === 'production' \r\n      ? '/.netlify/functions' \r\n      : 'http://localhost:8888/.netlify/functions';\r\n  }\r\n\r\n  // 제품 검색 API 호출 (Netlify Functions 통해)\r\n  async searchProducts(keyword: string, limit: number = 10): Promise<CoupangSearchResponse> {\r\n    try {\r\n      const response = await fetch(`${this.functionsUrl}/coupang-search`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          keyword,\r\n          limit\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.error) {\r\n        throw new Error(data.error);\r\n      }\r\n\r\n      return data;\r\n      \r\n    } catch (error) {\r\n      console.error('쿠팡 제품 검색 오류:', error);\r\n      \r\n      // 오류 발생 시 더미 데이터 반환\r\n      return this.getDummyProducts(keyword, limit);\r\n    }\r\n  }\r\n\r\n  // 더미 제품 데이터 생성 (백업용)\r\n  private getDummyProducts(keyword: string, limit: number): CoupangSearchResponse {\r\n    const products: CoupangProduct[] = [\r\n      {\r\n        productId: '1',\r\n        productName: `${keyword} 관련 제품 1`,\r\n        productPrice: 59000,\r\n        productImage: `https://via.placeholder.com/300x200?text=${encodeURIComponent(keyword)}1`,\r\n        productUrl: `https://www.coupang.com/vp/products/1?vendorItemId=1&src=1036296&spec=10304982`,\r\n        originalPrice: 79000,\r\n        discountRate: 25,\r\n        vendorItemId: '1',\r\n        categoryName: '생활용품',\r\n        rating: 4.5,\r\n        ratingCount: 128\r\n      },\r\n      {\r\n        productId: '2',\r\n        productName: `${keyword} 관련 제품 2`,\r\n        productPrice: 89000,\r\n        productImage: `https://via.placeholder.com/300x200?text=${encodeURIComponent(keyword)}2`,\r\n        productUrl: `https://www.coupang.com/vp/products/2?vendorItemId=2&src=1036296&spec=10304982`,\r\n        originalPrice: 109000,\r\n        discountRate: 18,\r\n        vendorItemId: '2',\r\n        categoryName: '패션',\r\n        rating: 4.2,\r\n        ratingCount: 89\r\n      },\r\n      {\r\n        productId: '3',\r\n        productName: `${keyword} 관련 제품 3`,\r\n        productPrice: 79000,\r\n        productImage: `https://via.placeholder.com/300x200?text=${encodeURIComponent(keyword)}3`,\r\n        productUrl: `https://www.coupang.com/vp/products/3?vendorItemId=3&src=1036296&spec=10304982`,\r\n        originalPrice: 99000,\r\n        discountRate: 20,\r\n        vendorItemId: '3',\r\n        categoryName: 'IT기기',\r\n        rating: 4.7,\r\n        ratingCount: 256\r\n      }\r\n    ];\r\n\r\n    return {\r\n      products: products.slice(0, limit),\r\n      totalCount: products.length\r\n    };\r\n  }\r\n\r\n  // 파트너스 링크 생성\r\n  generatePartnerLink(productUrl: string): string {\r\n    if (!this.partnerId) {\r\n      console.warn('쿠팡 파트너 ID가 설정되지 않았습니다. 기본 링크를 반환합니다.');\r\n      return productUrl;\r\n    }\r\n\r\n    const partnerCode = this.partnerId;\r\n    const encodedUrl = encodeURIComponent(productUrl);\r\n    \r\n    return `https://link.coupang.com/a/${partnerCode}?url=${encodedUrl}`;\r\n  }\r\n\r\n  // 검색 링크 생성 (백업용)\r\n  generateSearchLink(keyword: string): string {\r\n    if (!this.partnerId) {\r\n      return `https://www.coupang.com/np/search?q=${encodeURIComponent(keyword)}`;\r\n    }\r\n\r\n    const partnerCode = this.partnerId;\r\n    const encodedKeyword = encodeURIComponent(keyword);\r\n    \r\n    return `https://link.coupang.com/a/${partnerCode}?url=https%3A%2F%2Fwww.coupang.com%2Fnp%2Fsearch%3Fq%3D${encodedKeyword}`;\r\n  }\r\n}\r\n\r\nexport const coupangService = new CoupangPartnerService();\r\nexport type { CoupangProduct, CoupangSearchResponse }; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}