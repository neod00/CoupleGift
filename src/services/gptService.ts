import { GiftFormData, GiftRecommendation, GPTResponse } from '../types/gift';

// API Ìò∏Ï∂úÏùÑ Netlify FunctionÏúºÎ°ú Î≥ÄÍ≤Ω
const API_FUNCTION_URL = '/.netlify/functions/get-recommendations';

export const getGiftRecommendations = async (formData: GiftFormData): Promise<GPTResponse> => {
  console.log('üöÄ Netlify Function Ìò∏Ï∂ú ÏãúÏûë:', {
    url: API_FUNCTION_URL,
    environment: process.env.NODE_ENV
  });

  try {
    const response = await fetch(API_FUNCTION_URL, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });

    console.log('üì° Netlify Function ÏùëÎãµ ÏÉÅÌÉú:', {
      status: response.status,
      statusText: response.statusText,
      ok: response.ok
    });

    if (!response.ok) {
      const errorData = await response.json().catch(() => response.text());
      console.error('‚ùå Netlify Function Ïò§Î•ò:', errorData);
      throw new Error('ÏÑúÎ≤ÑÏóêÏÑú Ï∂îÏ≤úÏùÑ Î∞õÏïÑÏò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
    }

    let parsedResponse;
    try {
      parsedResponse = await response.json();
    } catch (error) {
      console.error('‚ùå ÏùëÎãµ JSON ÌååÏã± Ïò§Î•ò:', error);
      throw new Error('ÏÑúÎ≤Ñ ÏùëÎãµÏùÑ ÌååÏã±Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
    }
    
    console.log('‚úÖ ÏÑúÎ≤ÑÎ°úÎ∂ÄÌÑ∞ ÏÑ±Í≥µÏ†ÅÏù∏ ÏùëÎãµ Î∞õÏùå:', parsedResponse);
    
    // Í∞Å Ï∂îÏ≤ú ÏÉÅÌíàÏóê ÎåÄÌï¥ Ïø†Ìå° Í≤ÄÏÉâ ÎßÅÌÅ¨ Î∞è Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±
    const recommendationsWithLinks = parsedResponse.recommendations.map((rec: any, index: number) => {
      const searchKeyword = rec.searchKeyword || rec.title;
      const coupangUrl = generateCoupangSearchLink(searchKeyword);
      const imageUrl = getStableImageUrl(rec.category, rec.title);
      
      console.log(`üîç Ï∂îÏ≤ú ${index + 1}:`, {
        title: rec.title,
        searchKeyword: searchKeyword,
        coupangUrl: coupangUrl,
        imageUrl: imageUrl
      });
      
      return {
        id: rec.id,
        title: rec.title,
        description: rec.description,
        price: rec.price,
        imageUrl: imageUrl,
        coupangUrl: coupangUrl,
        category: rec.category,
        rating: 4.5, // Í∏∞Î≥∏ ÌèâÏ†ê
        reviewCount: Math.floor(Math.random() * 500) + 50 // ÎûúÎç§ Î¶¨Î∑∞ Ïàò
      };
    });

    return {
      recommendations: recommendationsWithLinks,
      success: true
    };
  } catch (error) {
    console.error('üí• Ï†ÑÏ≤¥ API Ìò∏Ï∂ú Ïò§Î•ò:', error);
    
    // Ïò§Î•ò Î∞úÏÉù Ïãú ÏÇ¨Ïö©ÏûêÏóêÍ≤å Î≥¥Ïó¨Ï§Ñ Î©îÏãúÏßÄÏôÄ Ìï®Íªò Ïã§Ìå® ÏùëÎãµ Î∞òÌôò
    return {
      recommendations: [],
      success: false,
      error: error instanceof Error ? error.message : 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.'
    };
  }
};

// Îçî ÏïàÏ†ïÏ†ÅÏù¥Í≥† Îã§ÏñëÌïú Ïù¥ÎØ∏ÏßÄ URL ÏÉùÏÑ± Ìï®Ïàò
const getStableImageUrl = (category: string, productTitle?: string): string => {
  // Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Îã§ÏñëÌïú Ïù¥ÎØ∏ÏßÄ ÌíÄ
  const categoryImagePools: { [key: string]: string[] } = {
    'Ïï°ÏÑ∏ÏÑúÎ¶¨': [
      'https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1573408301185-9146fe634ad0?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1602751584552-8ba73aad10e1?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Î∑∞Ìã∞': [
      'https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Ìñ•Ïàò': [
      'https://images.unsplash.com/photo-1541643600914-78b084683601?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1587017539504-64cf19f8f5df?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1592945403244-b3faa1b8d0b5?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1615529328331-f8917597711f?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1587017539504-64cf19f8f5df?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'ITÍ∏∞Í∏∞': [
      'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1541807084-5c3b00b11c2a?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Ìå®ÏÖò': [
      'https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1523381210434-271e8be1f6b1?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'ÏÉùÌôúÏö©Ìíà': [
      'https://images.unsplash.com/photo-1586880244386-8b3e34734ed8?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1586880244386-8b3e34734ed8?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'ÍΩÉ': [
      'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1526047932273-341f2a7631f9?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'ÏùåÏãù': [
      'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Ï†ÑÏûêÏ†úÌíà': [
      'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1541807084-5c3b00b11c2a?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Ï±Ö': [
      'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Ïö¥Îèô': [
      'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Ïó¨Ìñâ': [
      'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop&auto=format&q=80'
    ],
    'Í∏∞Î≥∏': [
      'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=300&fit=crop&auto=format&q=80',
      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop&auto=format&q=80'
    ]
  };
  
  // Ïπ¥ÌÖåÍ≥†Î¶¨ Ï†ïÍ∑úÌôî Î∞è Îß§Ïπ≠
  const normalizedCategory = category.toLowerCase().trim();
  const categoryMappings: { [key: string]: string } = {
    'Ïï°ÏÑ∏ÏÑúÎ¶¨': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'ÏïÖÏÑ∏ÏÑúÎ¶¨': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'Ï•¨ÏñºÎ¶¨': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'Î≥¥ÏÑù': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'Î™©Í±∏Ïù¥': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'Í∑ÄÍ±∏Ïù¥': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'ÌåîÏ∞å': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    'Î∞òÏßÄ': 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
    
    'Î∑∞Ìã∞': 'Î∑∞Ìã∞',
    'ÌôîÏû•Ìíà': 'Î∑∞Ìã∞',
    'ÎØ∏Ïö©': 'Î∑∞Ìã∞',
    'Ïä§ÌÇ®ÏºÄÏñ¥': 'Î∑∞Ìã∞',
    'ÏΩîÏä§Î©îÌã±': 'Î∑∞Ìã∞',
    
    'Ìñ•Ïàò': 'Ìñ•Ïàò',
    'ÌçºÌì∞': 'Ìñ•Ïàò',
    'ÌîÑÎûòÍ∑∏Îü∞Ïä§': 'Ìñ•Ïàò',
    
    'Ï†ÑÏûêÏ†úÌíà': 'ITÍ∏∞Í∏∞',
    'Ï†ÑÏûê': 'ITÍ∏∞Í∏∞',
    'it': 'ITÍ∏∞Í∏∞',
    'Í∏∞Í∏∞': 'ITÍ∏∞Í∏∞',
    'ÎîîÏßÄÌÑ∏': 'ITÍ∏∞Í∏∞',
    'Ïª¥Ìì®ÌÑ∞': 'ITÍ∏∞Í∏∞',
    'Ïä§ÎßàÌä∏Ìè∞': 'ITÍ∏∞Í∏∞',
    'ÌÉúÎ∏îÎ¶ø': 'ITÍ∏∞Í∏∞',
    
    'Ìå®ÏÖò': 'Ìå®ÏÖò',
    'ÏùòÎ•ò': 'Ìå®ÏÖò',
    'Ïò∑': 'Ìå®ÏÖò',
    'Ïã†Î∞ú': 'Ìå®ÏÖò',
    'Í∞ÄÎ∞©': 'Ìå®ÏÖò',
    
    'ÏÉùÌôúÏö©Ìíà': 'ÏÉùÌôúÏö©Ìíà',
    'ÏÉùÌôú': 'ÏÉùÌôúÏö©Ìíà',
    'Ìôà': 'ÏÉùÌôúÏö©Ìíà',
    'Ïù∏ÌÖåÎ¶¨Ïñ¥': 'ÏÉùÌôúÏö©Ìíà',
    'Ï£ºÎ∞©': 'ÏÉùÌôúÏö©Ìíà',
    
    'ÍΩÉ': 'ÍΩÉ',
    'ÌîåÎùºÏõå': 'ÍΩÉ',
    'Î∂ÄÏºÄ': 'ÍΩÉ',
    
    'ÏùåÏãù': 'ÏùåÏãù',
    'Î®πÍ±∞Î¶¨': 'ÏùåÏãù',
    'ÎîîÏ†ÄÌä∏': 'ÏùåÏãù',
    'ÏºÄÏù¥ÌÅ¨': 'ÏùåÏãù',
    'Ï¥àÏΩúÎ¶ø': 'ÏùåÏãù',
    
    'Ï±Ö': 'Ï±Ö',
    'ÎèÑÏÑú': 'Ï±Ö',
    'ÏÑúÏ†Å': 'Ï±Ö',
    
    'Ïö¥Îèô': 'Ïö¥Îèô',
    'Ïä§Ìè¨Ï∏†': 'Ïö¥Îèô',
    'ÌîºÌä∏ÎãàÏä§': 'Ïö¥Îèô',
    'Ìó¨Ïä§': 'Ïö¥Îèô',
    
    'Ïó¨Ìñâ': 'Ïó¨Ìñâ',
    'Ìä∏ÎûòÎ∏î': 'Ïó¨Ìñâ',
    'Ìú¥Í∞Ä': 'Ïó¨Ìñâ'
  };
  
  const mappedCategory = categoryMappings[normalizedCategory] || 'Í∏∞Î≥∏';
  const images = categoryImagePools[mappedCategory] || categoryImagePools['Í∏∞Î≥∏'];
  
  // Ï†úÌíàÎ™Ö Í∏∞Î∞ò Ïä§ÎßàÌä∏ Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù
  let selectedImageIndex = 0;
  
  if (productTitle) {
    const title = productTitle.toLowerCase();
    
    // Ï†úÌíàÎ™ÖÏóê Ìè¨Ìï®Îêú ÌÇ§ÏõåÎìúÎ°ú Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù
    if (title.includes('Ìï∏ÎìúÎ∞±') || title.includes('Í∞ÄÎ∞©') || title.includes('Î∞±') || title.includes('ÌÅ¥Îü¨Ïπò')) {
      selectedImageIndex = 0; // Ï≤´ Î≤àÏß∏ Ïù¥ÎØ∏ÏßÄ (Ìï∏ÎìúÎ∞±/Í∞ÄÎ∞© Ïä§ÌÉÄÏùº)
    } else if (title.includes('Ïä§Ïπ¥ÌîÑ') || title.includes('Î™©ÎèÑÎ¶¨') || title.includes('Î®∏ÌîåÎü¨')) {
      selectedImageIndex = 1; // Îëê Î≤àÏß∏ Ïù¥ÎØ∏ÏßÄ (Ïä§Ïπ¥ÌîÑ Ïä§ÌÉÄÏùº)
    } else if (title.includes('Í∑ÄÍ±∏Ïù¥') || title.includes('Î™©Í±∏Ïù¥') || title.includes('Î∞òÏßÄ') || title.includes('ÌåîÏ∞å')) {
      selectedImageIndex = 2; // ÏÑ∏ Î≤àÏß∏ Ïù¥ÎØ∏ÏßÄ (Ï£ºÏñºÎ¶¨ Ïä§ÌÉÄÏùº)
    } else if (title.includes('ÏõêÌîºÏä§') || title.includes('ÎìúÎ†àÏä§') || title.includes('Ïä§Ïª§Ìä∏')) {
      selectedImageIndex = 3; // ÎÑ§ Î≤àÏß∏ Ïù¥ÎØ∏ÏßÄ (ÏùòÎ•ò Ïä§ÌÉÄÏùº)
    } else if (title.includes('Ìñ•Ïàò') || title.includes('ÌçºÌì∞')) {
      selectedImageIndex = 4; // Îã§ÏÑØ Î≤àÏß∏ Ïù¥ÎØ∏ÏßÄ (Ìñ•Ïàò Ïä§ÌÉÄÏùº)
    } else {
      // ÎûúÎç§ ÏÑ†ÌÉùÏúºÎ°ú Îã§ÏñëÏÑ± ÌôïÎ≥¥
      selectedImageIndex = Math.floor(Math.random() * images.length);
    }
  } else {
    // Ï†úÌíàÎ™ÖÏù¥ ÏóÜÏúºÎ©¥ ÎûúÎç§ ÏÑ†ÌÉù
    selectedImageIndex = Math.floor(Math.random() * images.length);
  }
  
  const selectedImage = images[selectedImageIndex];
  
  console.log(`üñºÔ∏è Ïä§ÎßàÌä∏ Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù: "${category}" ‚Üí "${mappedCategory}" (${selectedImageIndex + 1}/${images.length})`);
  
  return selectedImage;
};

// Ïø†Ìå° ÌååÌä∏ÎÑàÏä§ Í≤ÄÏÉâ ÎßÅÌÅ¨ ÏÉùÏÑ± Ìï®Ïàò
const generateCoupangSearchLink = (keyword: string): string => {
  const partnerId = process.env.REACT_APP_COUPANG_PARTNER_ID;
  const encodedKeyword = encodeURIComponent(keyword);
  
  console.log(`üîó Ïø†Ìå° ÎßÅÌÅ¨ ÏÉùÏÑ±: "${keyword}", ÌååÌä∏ÎÑàID: ${partnerId ? 'ÏÑ§Ï†ïÎê®' : 'ÏóÜÏùå'}`);
  
  if (partnerId) {
    const partnerLink = `https://link.coupang.com/a/${partnerId}?url=https%3A%2F%2Fwww.coupang.com%2Fnp%2Fsearch%3Fq%3D${encodedKeyword}`;
    console.log(`‚úÖ ÌååÌä∏ÎÑàÏä§ ÎßÅÌÅ¨: ${partnerLink}`);
    return partnerLink;
  } else {
    const directLink = `https://www.coupang.com/np/search?q=${encodedKeyword}`;
    console.log(`‚ö†Ô∏è ÏßÅÏ†ë ÎßÅÌÅ¨: ${directLink}`);
    return directLink;
  }
};

// ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± Ìï®Ïàò (Í∞úÎ∞ú/ÌÖåÏä§Ìä∏ Î∞è Ìè¥Î∞±Ïö©)
export const getDummyRecommendations = async (formData: GiftFormData): Promise<GPTResponse> => {
  console.log('üé≠ ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± Ï§ë...');
  await new Promise(resolve => setTimeout(resolve, 1500)); 

  const dummyRecommendations: GiftRecommendation[] = [
    {
      id: '1',
      title: 'Ïª§Ìîå Î™©Í±∏Ïù¥ ÏÑ∏Ìä∏',
      description: 'ÏÇ¨ÎûëÏä§Îü¨Ïö¥ ÌïòÌä∏ Î™®ÏñëÏùò Ïª§Ìîå Î™©Í±∏Ïù¥Î°ú ÌäπÎ≥ÑÌïú Í∏∞ÎÖêÏùºÏùÑ Ï∂ïÌïòÌïòÏÑ∏Ïöî',
      price: '45,000Ïõê',
      imageUrl: getStableImageUrl('Ïï°ÏÑ∏ÏÑúÎ¶¨'),
      coupangUrl: generateCoupangSearchLink('Ïª§Ìîå Î™©Í±∏Ïù¥ ÏÑ∏Ìä∏'),
      category: 'Ïï°ÏÑ∏ÏÑúÎ¶¨',
      rating: 4.5,
      reviewCount: 1284
    },
    {
      id: '2',
      title: 'ÌîÑÎ¶¨ÎØ∏ÏóÑ Ìñ•Ïàò ÏÑ∏Ìä∏',
      description: 'Í≥†Í∏âÏä§Îü¨Ïö¥ Ìñ•ÏúºÎ°ú ÌäπÎ≥ÑÌïú ÏàúÍ∞ÑÏùÑ ÎçîÏö± Í∏∞ÏñµÏóê ÎÇ®Í≤å ÎßåÎìúÎäî Ìñ•Ïàò',
      price: '89,000Ïõê',
      imageUrl: getStableImageUrl('Ìñ•Ïàò'),
      coupangUrl: generateCoupangSearchLink('ÌîÑÎ¶¨ÎØ∏ÏóÑ Ìñ•Ïàò ÏÑ∏Ìä∏'),
      category: 'Ìñ•Ïàò',
      rating: 4.3,
      reviewCount: 567
    },
    {
      id: '3',
      title: 'Î¨¥ÏÑ† Î∏îÎ£®Ìà¨Ïä§ Ïù¥Ïñ¥Ìè∞',
      description: 'Í≥†ÏùåÏßà ÏÇ¨Ïö¥ÎìúÎ°ú Ìï®Íªò ÏùåÏïÖÏùÑ Ï¶êÍ∏∏ Ïàò ÏûàÎäî Ïä§ÌÉÄÏùºÎ¶¨ÏãúÌïú Ïù¥Ïñ¥Ìè∞',
      price: '129,000Ïõê',
      imageUrl: getStableImageUrl('Ï†ÑÏûêÏ†úÌíà'),
      coupangUrl: generateCoupangSearchLink('Î¨¥ÏÑ† Î∏îÎ£®Ìà¨Ïä§ Ïù¥Ïñ¥Ìè∞'),
      category: 'Ï†ÑÏûêÏ†úÌíà',
      rating: 4.6,
      reviewCount: 2341
    },
    {
      id: '4',
      title: 'Î°úÎß®Ìã± ÍΩÉÎã§Î∞ú',
      description: 'Ïã†ÏÑ†Ìïú Ïû•ÎØ∏ÏôÄ Í≥ÑÏ†à ÍΩÉÏúºÎ°ú Íµ¨ÏÑ±Îêú ÏïÑÎ¶ÑÎã§Ïö¥ ÍΩÉÎã§Î∞ú',
      price: '35,000Ïõê',
      imageUrl: getStableImageUrl('ÍΩÉ'),
      coupangUrl: generateCoupangSearchLink('Î°úÎß®Ìã± ÍΩÉÎã§Î∞ú'),
      category: 'ÍΩÉ',
      rating: 4.4,
      reviewCount: 892
    }
  ];

  console.log('‚úÖ ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± ÏôÑÎ£å:', dummyRecommendations.length, 'Í∞ú ÏïÑÏù¥ÌÖú');

  return {
    recommendations: dummyRecommendations,
    success: true
  };
}; 